================
Виды и редакторы
================

.. _projEditor :

Редактор проекта pgCodeKeeper
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Редактор проекта – основной способ работы с pgCodeKeeper. Интерфейс редактора, состоящий из четырех основных частей:

#. Тулбар
#. Панель инструментов
#. Таблица различий
#. Панель сравнения

.. image :: ../images/main_view.png

**Тулбар** предназачен для выбора источника данных, с которым предстоит работать.

**Панель инструментов** предназначена для работы со списком объектов. Они имеют следующее предназначение:

- |check_all| – выбрать все элементы.
- |uncheck_all| – снять выбор со всех элементов.
- |loop_obj| – инвертировать выбор элементов.
- |copy_edit| – копировать набор выбранных элементов в буфер обмена как регулярное выражение.
- |empty_filter| / |filter_tsk| - неактивный / активный фильтр объектов.
- Фильтр списка объектов по имени или регулярному выражению.
- Применить изменения к проекту
- Применить изменения к базе данных
- Получить изменения

**Таблица различий** отображает список объектов, которые различаются в сравниваемых схемах БД. Объект может находиться в трех состояниях: существовать только в базе данных, только в проекте или и в проекте и в базе данных. В зависимости от состояния, объекты в списке изменений помечаются как remote, project и edit соответственно.

**Панель сравнения** показывает изменения, произошедшие в SQL представлении объекта.

.. |check_all| image:: ../images/pgcodekeeper_project_view/check_all.gif
.. |uncheck_all| image:: ../images/pgcodekeeper_project_view/uncheck_all.gif
.. |loop_obj| image:: ../images/pgcodekeeper_project_view/loop_obj.gif
.. |copy_edit| image:: ../images/pgcodekeeper_project_view/copy_edit.png
.. |empty_filter| image:: ../images/pgcodekeeper_project_view/empty_filter.png
.. |filter_tsk| image:: ../images/pgcodekeeper_project_view/filter_tsk.png

SQL редактор
~~~~~~~~~~~~

SQL редактор внешне не отличается от обычного текстового редактора Eclipse, но в нем имеется возможность подсветки синтаксиса SQL, автоподстановки шаблонов SQL запросов и навигации по объектам схемы базы данных.

.. image :: ../images/autocomplete.png


При работе с SQL редактором в верхнем тулбаре доступны следующие возможности:

| |quick_update| - быстрый накат. Накат **различий** между текущий файлом и объектом в базе данных. Не работает в скриптах миграции.
| |update_ddl| - выполнить выбранное. Накат текущего скрипта на выбранную базу данных.
| |progress_stop| - отменить выполнение. Отмена выполнения текущего наката изменений.
| |refresh| - получить изменения. Обновляет редактор проекта, в котором находится данный файл. Не работает в скриптах миграции.

.. |quick_update| image:: ../images/pgcodekeeper_project_view/quick_update.png
.. |update_ddl| image:: ../images/pgcodekeeper_project_view/update_ddl.gif
.. |progress_stop| image:: ../images/pgcodekeeper_project_view/progress_stop.gif
.. |refresh| image:: ../images/pgcodekeeper_project_view/refresh.png



Просмотр зависимостей объекта БД
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Вид **pg Зависимости** показывает зависимости, в которых участвует текущий объект, выбранный в панели различий активного редактора проекта.

.. image :: ../images/pg_depend.png

Стрелки указывают на направление связи от зависящего объекта к его зависимости.

Переключатель **Проект - БД** позволяет выбрать, для какой БД, участвующей в сравнении, показывать объекты и зависимости. После переключения необходимо повторно выбрать элемент в панели различий редактора.

Кнопка **Добавить зависимости** позволяет открыть диалог ручного добавления зависимостей.

.. image :: ../images/manual_depcies.png

В этом диалоге можно явно задать зависимости между объектами БД. Это может понадобиться, например, в случае если автоматическое распознавание зависимостей не сработает для некоторой сложной зависимости. Добавленные зависимости будут учтены при генерации последовательности выражений скрипта наката.

Окно состоит из двух частей, которые служат для добавления зависимостей к сравниваемым БД.

Для добавления зависимостей между объектами, достаточно ввести начльные буквы из названия объекта и из выпадающего списка выбрать имена зависимых объектов и нажать на кнопку **Добавить**. Зависимость отобразится в списке добавленных.

Для удаления выделите связку зависимых объектов и нажмите **Удалить**.

.. _overrideView :

Перезапись объектов
~~~~~~~~~~~~~~~~~~~

Вид **Перезапись объектов** отображает список переопределенных объектов в библиотеках для активного редактора проекта. Данный вид автоматически отображается при получении изменений, если присутствуют хотя бы один конфликт.

.. image :: ../images/override_view.png

Кнопка |sync| отображает записи, относящиеся только к объектам, выбранным в панели различий активного редактора проекта.

.. |sync| image:: ../images/pgcodekeeper_project_view/synced.gif

Контекстное меню позволяет открыть обе версии объекта, а также просмотреть различия в специальном редакторе сравнения.